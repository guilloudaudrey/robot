<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        .buttons {
            text-align: center;
        }
    </style>

</head>

<body>
    <div class="buttons">
        <button class="forward">forward</button>
        <br>
        <button class="left">left</button>

        <button class="right">right</button>
        <br>
        <button class="backward">backward</button>
        <br><br>
        <button class="stop">stop</button>
        <button class="horn">horn</button>
        <p class="sensor" style="width: 200px; height: 50px; background: yellow"></p>
    </div>

    <script>
        let forward = document.querySelector('.forward');
        let backward = document.querySelector('.backward');
        let left = document.querySelector('.left');
        let right = document.querySelector('.right');
        let stop = document.querySelector('.stop');
        let horn = document.querySelector('.horn');
        let sensor = document.querySelector('.sensor');


        forward.addEventListener('click', function() {
            let xhr = new XMLHttpRequest();
            xhr.open('GET', '/bot/forward');
            xhr.onreadystatechange = function() {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {

                        eval(xhr.responseText);
                        console.log(xhr.responseText);
                    } else {
                        console.error('unexpected status code:', this.status);
                    }
                }
            };
            xhr.send(null);
        });

        backward.addEventListener('click', function() {
            let xhr = new XMLHttpRequest();
            xhr.open('GET', '/bot/backward');
            xhr.onreadystatechange = function() {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {
                        console.log(xhr.response);
                        eval(xhr.responseText);

                        console.log(xhr.responseText);
                    } else {
                        console.error('unexpected status code:', this.status);
                    }
                }
            };
            xhr.send(null);
        });

        left.addEventListener('click', function() {
            let xhr = new XMLHttpRequest();
            xhr.open('GET', '/bot/left');
            xhr.onreadystatechange = function() {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {

                        eval(xhr.responseText);
                        console.log(xhr.responseText);
                    } else {
                        console.error('unexpected status code:', this.status);
                    }
                }
            };
            xhr.send(null);
        });

        right.addEventListener('click', function() {
            let xhr = new XMLHttpRequest();
            xhr.open('GET', '/bot/right');
            xhr.onreadystatechange = function() {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {

                        eval(xhr.responseText);
                        console.log(xhr.responseText);
                    } else {
                        console.error('unexpected status code:', this.status);
                    }
                }
            };

            xhr.send(null);
        });

        stop.addEventListener('click', function() {
            let xhr = new XMLHttpRequest();
            xhr.open('GET', '/bot/stop');
            xhr.onreadystatechange = function() {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {

                        eval(xhr.responseText);
                        console.log(xhr.responseText);
                    } else {
                        console.error('unexpected status code:', this.status);
                    }
                }
            };
            xhr.send(null);
        });

        setInterval(function() {
            let xhr = new XMLHttpRequest();
            xhr.open('GET', '/bot/sensor');
            xhr.onreadystatechange = function() {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {

                        console.log(responseText);
                    } else {
                        console.error('unexpected status code:', this.status);
                    }
                }
            };
            xhr.send(null);
        }, 500);
    </script>

</body>

</html>